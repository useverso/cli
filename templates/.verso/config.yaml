# VERSO Framework Configuration
# https://useverso.dev
#
# This file controls how VERSO behaves in your project.
# Adjust these settings to match your team size, risk tolerance, and workflow.

# ---------------------------------------------------------------------------
# Scale
# ---------------------------------------------------------------------------
# Determines documentation requirements, ceremony level, and sensible defaults.
# Options:
#   solo        - One developer, minimal ceremony
#   small-team  - 2-5 developers, lightweight coordination
#   startup     - 5-15 developers, structured but lean
#   enterprise  - 15+ developers, full governance
scale: solo

# ---------------------------------------------------------------------------
# Autonomy Dial
# ---------------------------------------------------------------------------
# Controls how much trust you place in AI agents for each work type.
# Higher levels mean less human intervention.
#
# Levels:
#   1 - Full control: approve spec, plan, every commit, and PR
#   2 - Standard:     approve spec and PR (recommended starting point)
#   3 - Light touch:  approve only PR
#   4 - Full auto:    agent handles everything, you just merge
autonomy:
  feature: 2
  bug: 3
  hotfix: 3
  refactor: 2
  chore: 4

# ---------------------------------------------------------------------------
# Work-in-Progress Limits
# ---------------------------------------------------------------------------
# Prevents the system from producing more output than you can review.
# An agent that opens 20 PRs while you sleep is creating a review backlog,
# not being productive.
wip:
  building: 2          # Max concurrent items being built by agents
  pr_ready: 5          # Max PRs sitting in the review queue

# ---------------------------------------------------------------------------
# CI / Continuous Integration
# ---------------------------------------------------------------------------
# CI checks act as transition guards in the state machine.
# Building → Verifying requires all checks to pass when block_transition is true.
ci:
  required_checks:
    - typecheck
    - tests
    - lint
  block_transition: true    # if true, Builder must confirm all checks pass before PR

# ---------------------------------------------------------------------------
# Quality Gates
# ---------------------------------------------------------------------------
# Quality gates affect the Reviewer's verdict.
# "block" = issues force REQUEST_CHANGES. "warn" = issues are flagged but don't block.
quality:
  security_gate: warn       # warn | block
  accessibility_gate: warn  # warn | block
  min_coverage: 80          # minimum test coverage percentage (0 to disable)
  require_tests: true       # Builder must include tests for new code

# ---------------------------------------------------------------------------
# Board Provider
# ---------------------------------------------------------------------------
# Where work items live. The Pilot reads and updates this board.
#
# Providers:
#   github  - GitHub Issues + GitHub Projects
#   linear  - Linear issues and projects
#   local   - Local YAML files (no external dependency)
board:
  provider: local              # local | github | linear
  # github:                    # Uncomment if using GitHub
  #   owner: ""
  #   project_number: 0
  # linear:                    # Uncomment if using Linear
  #   workspace: ""
  #   team: ""

# ---------------------------------------------------------------------------
# Delegation Strategy
# ---------------------------------------------------------------------------
# How the Pilot delegates work to Builder and Reviewer agents.
#   subagents: Builder/Reviewer run as Claude Code subagents (background, parallel)
#   team: Builder/Reviewer run as Agent Team teammates (parallel, richer communication)
# Agent Teams requires CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS enabled.
delegation: subagents

# ---------------------------------------------------------------------------
# Tech Debt Policy
# ---------------------------------------------------------------------------
# VERSO tracks the ratio of debt-reduction work to feature work.
# When the ratio drops below target, the Pilot will suggest debt items.
debt:
  target_ratio: 0.2           # 20% of completed work should address debt
  audit_trigger: milestone    # When to run a debt audit: milestone | weekly | manual

# ---------------------------------------------------------------------------
# Dependency Management
# ---------------------------------------------------------------------------
# How automated dependency updates (Dependabot, Renovate) are handled.
dependencies:
  auto_capture: true         # auto-create work items from dependency alerts
  default_type: chore        # work type for dependency updates
  default_autonomy: 4        # autonomy level for dependency updates
  security_patches: hotfix   # treat security patches as hotfixes

# ---------------------------------------------------------------------------
# Incident Response
# ---------------------------------------------------------------------------
# Severity-based overrides for urgent production issues.
incidents:
  severity_override: true
  critical:
    autonomy: 3              # skip spec approval, approve only PR
    wip_override: true        # ignore WIP limits for critical incidents
  major:
    autonomy: 3
    wip_override: false       # respect WIP limits

# ---------------------------------------------------------------------------
# Cost Tracking
# ---------------------------------------------------------------------------
# Every work item tracks token usage and developer time so you can calculate
# real ROI compared to traditional development.
costs:
  enabled: true
  token_pricing:
    input_per_1m: 15.00       # Dollars per 1M input tokens
    output_per_1m: 75.00      # Dollars per 1M output tokens
  dev_hourly_rate: 75         # Your hourly rate for ROI calculations
  traditional_estimates:
    simple_item_hours: 4      # Baseline hours for a simple task (traditional)
    medium_item_hours: 12     # Baseline hours for a medium task (traditional)
    complex_item_hours: 32    # Baseline hours for a complex task (traditional)

# ---------------------------------------------------------------------------
# Monitoring (planned)
# ---------------------------------------------------------------------------
# Production monitoring integration. When enabled, monitoring alerts can
# auto-capture work items on the board.
#
# This is a planned extension point. To use it today, report production
# issues to the Pilot conversationally — it will classify and route them
# as hotfixes or bugs.
#
# monitoring:
#   enabled: false
#   providers: []           # e.g., [sentry, datadog, vercel-analytics]
#   auto_capture:
#     errors: true          # auto-create Bug items from error spikes
#     performance: false    # auto-create items from performance degradation
